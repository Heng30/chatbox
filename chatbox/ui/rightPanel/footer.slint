import { Button, TextEdit } from "std-widgets.slint";
import { Theme } from "../theme.slint";
import { Store } from "../store.slint";
import { Logic } from "../logic.slint";
import { Btn } from "../base/btn.slint";

export component Footer inherits VerticalLayout {
    spacing: Theme.spacing;
    height: Theme.bottom-panel-height;
    in-out property<length> btn-height: 50px;

    te := TextEdit {
        edited(text) => {}
    }

    HorizontalLayout {
        alignment: space-between;
        spacing: Theme.spacing * 2;

        HorizontalLayout {
            spacing: Theme.spacing;
            width: 50%;

            Btn {
                bg-color: Theme.danger-color;
                icon: @image-url("../images/reset.svg");
                width: 30%;
                height: root.btn-height;
                text: "重置";
                clicked => {
                    Logic.reset-current-session();
                }
            }

            Btn {
                height: root.btn-height;
                bg-color: Theme.warning-color;
                icon: @image-url("../images/stop.svg");
                text: "停止";
                clicked => {
                }
            }
        }

        HorizontalLayout {
            width: 50%;
            spacing: Theme.spacing;

            Btn {
                height: root.btn-height;
                bg-color: Theme.danger-color;
                icon: @image-url("../images/format-clear.svg");
                width: 30%;

                text: "清空";
                clicked => {
                    te.text = "";
                }
            }

            Btn {
                height: root.btn-height;
                icon: @image-url("../images/send.svg");
                text: "发送";
                clicked => {
                    if (te.text == "") { return; }

                    Logic.send-input-text(te.text);
                    te.text = "";
                }
            }
        }
    }
}
